<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlyphOS Unified</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles-unified.css">
    
    <!-- Markdown Support -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Mermaid Diagram Support -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

    <!-- KaTeX Math Support -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
</head>
<body>

    <div class="app-grid" id="app-grid">
        
<header class="app-header">
    <div class="header-content">
        <div class="app-info">
            <h1 class="app-title">GlyphOS Unified</h1>
            <p class="app-subtitle">The text-first operating system for AI reasoning</p>
            <span class="app-version">GlyphOS v2.6</span>
        </div>
        <div class="header-actions">
            <a href="https://glyphos.reliatrack.org/docs" target="_blank" class="btn btn-secondary" id="view-docs-link">View Documentation</a>
            <button class="btn btn-primary" id="start-typing-btn">Start Typing</button>
            <button class="btn btn-primary" id="enter-run-btn">Enter Run</button>
        </div>
    </div>
    <div class="header-shortcuts">
        <span class="shortcut-hint">
            <kbd>Cmd/Ctrl</kbd>+<kbd>K</kbd>: Focus command input
        </span>
        <span class="shortcut-hint">
            <kbd>Cmd/Ctrl</kbd>+<kbd>Enter</kbd>: Execute command
        </span>
        <span class="shortcut-hint">
            <kbd>Cmd/Ctrl</kbd>+<kbd>/</kbd>: Toggle Help
        </span>
        <span class="shortcut-hint">
            <a href="#" onclick="window.os.handleCommand('help'); return false;">/help</a> hint
        </span>
    </div>
</header>

<main class="app-main">
    <section id="workspace" class="main-column-left">
        <div class="workspace-header">
            <h2>Workspace</h2>
            <button class="icon-btn-small" id="toggle-left-sidebar-btn" title="Toggle Sidebar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line></svg>
            </button>
        </div>
        
        <div class="workspace-actions">
            <button class="btn btn-secondary" id="new-thread-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line></svg>
                New Thread
            </button>
            <label for="file-upload-hidden" class="btn btn-secondary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
                Upload Context
            </label>
            <input type="file" id="file-upload-hidden" style="display:none" multiple>
        </div>

        <div class="workspace-history">
            <h3>History</h3>
            <ul id="history-list" class="scrollable-list">
                <!-- History items injected here -->
                <li class="history-item active">
                    <span class="history-title">Welcome Session</span>
                    <span class="history-meta">Just now</span>
                    <span class="history-provider-icon">GlyphOS</span>
                </li>
            </ul>
        </div>

        <!-- Initial Onboarding Card -->
        <div class="onboarding-container" id="onboarding-card">
            <div class="onboarding-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
            </div>
            <h1>GlyphOS Unified</h1>
            <p class="subtitle">The text-first operating system for AI reasoning.</p>
            
            <div class="shortcut-grid">
                <div class="shortcut-item">
                    <span class="key">/</span>
                    <span class="desc">Commands</span>
                </div>
                <div class="shortcut-item">
                    <span class="key">@</span>
                    <span class="desc">Switch Provider</span>
                </div>
                <div class="shortcut-item">
                    <span class="key">Enter</span>
                    <span class="desc">Run</span>
                </div>
            </div>

            <div class="action-buttons">
                <button class="primary-btn" onclick="document.getElementById('cmd-input').focus()">Start Typing</button>
                <button class="secondary-btn" onclick="window.os.handleCommand('help')">View Documentation</button>
            </div>
        </div>

        <!-- Command Input -->
        <div class="command-input-area">
            <label for="cmd-input" class="visually-hidden">Command</label>
            <input type="text" class="command-input" id="cmd-input" placeholder="Type a command or message... (Try /help)" autocomplete="off">
            <button class="clear-cmd-btn" aria-label="Clear command input" style="display:none;">&times;</button>
            <button class="run-cmd-btn" aria-label="Run command">Run</button>
            <div class="command-history-dropdown hidden">
                <!-- History items injected here -->
            </div>
        </div>

        <div class="canvas-content" id="canvas-content">
            <!-- Chat content anchors here -->
        </div>

    </section>
    <aside id="control-panel" class="main-column-right">
        <div class="control-panel-header">
            <h2>Control Panel</h2>
            <button class="icon-btn-small" id="toggle-right-sidebar-btn" title="Toggle Sidebar">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="15" y1="3" x2="15" y2="21"></line></svg>
            </button>
        </div>
        
        <div class="control-group">
            <h3>Intelligence</h3>
            <div class="control-item">
                <label for="provider-select">Provider</label>
                <select id="provider-select" class="modern-select" title="Choose where your model runs">
                    <option value="ollama">Ollama (Local)</option>
                    <option value="groq">Groq (Cloud)</option>
                    <option value="openai">OpenAI (GPT-4)</option>
                    <option value="gemini">Google Gemini</option>
                    <option value="openrouter">OpenRouter</option>
                </select>
                <div id="api-key-container" class="api-key-wrapper hidden">
                    <input type="password" id="api-key-input" class="modern-input" placeholder="Enter API Key" aria-label="API Key">
                    <button id="save-key-btn" class="icon-btn-small" title="Save Key">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    </button>
                </div>
                <div id="model-list" class="model-tags">
                    <!-- Models injected via JS -->
                </div>
            </div>
        </div>

        <div class="control-group">
            <h3>Temperature</h3>
            <fieldset class="control-item">
                <legend class="visually-hidden">Temperature Mode</legend>
                <div class="style-selector">
                    <label>
                        <input type="radio" name="temperature-mode" value="focused" id="temp-focused">
                        <span class="style-btn" title="Focused (deterministic)">Focused</span>
                    </label>
                    <label>
                        <input type="radio" name="temperature-mode" value="balanced" id="temp-balanced" checked>
                        <span class="style-btn" title="Balanced (mixed)">Balanced</span>
                    </label>
                    <label>
                        <input type="radio" name="temperature-mode" value="creative" id="temp-creative">
                        <span class="style-btn" title="Creative (more varied)">Creative</span>
                    </label>
                </div>
            </fieldset>
        </div>

        <div class="control-group">
            <h3>System Preferences</h3>
            <div class="control-item">
                <label for="chk-stream" class="checkbox-label">
                    <input type="checkbox" id="chk-stream" checked>
                    <span>Stream Responses</span>
                    <span class="tooltip" role="tooltip" aria-label="Show tokens as they generate">?</span>
                </label>
            </div>
            <div class="control-item">
                <label for="chk-focus" class="checkbox-label">
                    <input type="checkbox" id="chk-focus" checked>
                    <span>Ambient Focus Mode</span>
                    <span class="tooltip" role="tooltip" aria-label="Reduce UI distractions during generation">?</span>
                </label>
            </div>
            <div class="control-item">
                <label for="theme-toggle" class="toggle-label">
                    <span>Theme:</span>
                    <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark/light theme">
                        <span class="theme-icon light" aria-hidden="true">‚òÄÔ∏è</span>
                        <span class="theme-icon dark" aria-hidden="true">üåô</span>
                    </button>
                </label>
            </div>
        </div>
    </aside>
</main>


<footer id="status-bar" class="app-footer">
    <div class="status-group">
        <span id="status-text" class="status-text" role="status" aria-live="polite">Ready</span>
        <div id="status-spinner" class="status-spinner hidden"></div>
    </div>
    <div class="status-group">
        <span class="status-label">Provider:</span>
        <span id="status-provider" class="status-badge">Ollama</span>
    </div>
    <div class="status-group indicators">
        <span id="indicator-streaming" class="status-indicator hidden" title="Streaming Responses Active">Stream</span>
        <span id="indicator-focus" class="status-indicator hidden" title="Ambient Focus Mode Active">Focus</span>
    </div>
    <div class="status-group shortcuts">
        <span class="shortcut-hint">Press <kbd>/</kbd> for help</span>
    </div>
</footer>

    </div>

    <script src="script-unified.js"></script>
</body>
</html>
